#n
#!/bin/sed -n -f

/<h\([0-9]\)\(\s\+id="\([^"]*\)"\)\?>\(.*\)<\/h\([0-9]\)>/ {

	# Indentation:

	s!<h1!	&!;
	s!<h2!		&!;
	s!<h3!			&!;
	s!<h4!				&!;
	s!<h5!					&!;
	s!<h6!						&!;
	s!<h7!							&!;
	s!<h8!								&!;
	s!<h9!									&!;

	# Itemize, linkify:

	s!<h\([0-9]\)\(\s\+id="\([^"]*\)"\)\?>\(.*\)</h\([0-9]\)>!<li><a href="#\3">\4</a></li>!

	p;
}
